require=function t(e,i,o){function c(r,s){if(!i[r]){if(!e[r]){var a="function"==typeof require&&require;if(!s&&a)return a(r,!0);if(n)return n(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return c(i||t)},u,u.exports,t,e,i,o)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<o.length;r++)c(o[r]);return c}({Block:[function(t,e,i){"use strict";cc._RF.push(e,"046deAf+eFNJ4p7NRwpMV3x","Block"),cc.Class({extends:cc.Component,properties:{blockType:null,gameScript:null},onLoad:function(){},init:function(t,e){this.blockType=t,this.gameScript=e,this.node.on("touchstart",function(){"white"==t?(console.log("lily"),e.onTouchBlock(this)):"lily"==t&&(console.log("white"),e.gameOver(this))}.bind(this))}}),cc._RF.pop()},{}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","Game"),cc.Class({extends:cc.Component,properties:{buttonStart:cc.Button,title:cc.Sprite,whiteBlock:cc.Prefab,lilyBlock:cc.Prefab,blockPane:cc.Node,curTopRow:6,curBottomRow:0,score:cc.Label,time:cc.Label,targetScore:cc.Label,buttonGameOver:cc.Button,buttonPass:cc.Button,remainTime:35,targetScoreInt:50,minTargetScoreInt:20,selectSound:cc.AudioSource,winSound:cc.AudioSource,gameOverSound:cc.AudioSource,clickSound:cc.AudioSource},blockPos:cc.Vec2,timeCount:0,curScore:0,bOver:!1,tempRemainTime:0,onLoad:function(){this.tempRemainTime=this.remainTime,this.blockPos=this.blockPane.position,this.initLoad()},buttonStartClick:function(){console.log("1111"),this.selectSound.play(),this.initScene(),this.generateBlock()},initLoad:function(){this.score.node.active=!1,this.time.node.active=!1,this.targetScore.node.active=!1,this.buttonGameOver.node.active=!1,this.buttonPass.node.active=!1,this.buttonStart.node.active=!0,this.title.node.active=!0,this.blockPane.active=!0,this.blockPane.destroyAllChildren(),this.blockPane.position=this.blockPos,this.remainTime=this.tempRemainTime},initScene:function(){this.buttonStart.node.active=!1,this.title.node.active=!1,this.score.node.active=!0,this.time.node.active=!0,this.targetScore.node.active=!0,this.blockPane.active=!0,this.curTopRow=6,this.curBottomRow=0,this.timeCount=0,this.curScore=0,this.bOver=!1,this.updateScore(),this.updateTargetScore(),this.updateTime()},generateOneBlock:function(t){for(var e=Math.floor(5*Math.random()),i=0;i<5;i++){var o=null;i==e?(o=cc.instantiate(this.whiteBlock)).getComponent("Block").init("white",this):(o=cc.instantiate(this.lilyBlock)).getComponent("Block").init("lily",this),this.blockPane.addChild(o),o.name=t+"#"+i,o.position=cc.pMult(cc.v2(i,t),80)}},generateBlock:function(){for(var t=0;t<6;t++)this.generateOneBlock(t)},updateBlock:function(){},onTouchBlock:function(t){if(this.clickSound.play(),t.node.name.split("#")[0]==this.curBottomRow){for(var e=0;e<5;e++)this.blockPane.getChildByName(this.curBottomRow+"#"+e).removeFromParent();var i=cc.moveTo(.2,this.blockPane.x,this.blockPane.y-80);this.blockPane.runAction(i),this.generateOneBlock(this.curTopRow),this.curTopRow++,this.curBottomRow++,this.curScore++,this.updateScore(),this.curScore==this.targetScoreInt&&this.gamePass()}},gamePass:function(){this.winSound.play(),this.blockPane.active=!1,this.buttonPass.node.active=!0,this.bOver=!0},gameOver:function(t){t.node.name.split("#")[0]==this.curBottomRow&&this.gameOver1()},gameOver1:function(){this.gameOverSound.play(),console.log("gameOver"),this.blockPane.active=!1,this.buttonGameOver.node.active=!0,this.bOver=!0,this.minTargetScoreInt<this.targetScoreInt-5&&(this.targetScoreInt-=5)},buttonGameOverClick:function(){this.selectSound.play(),this.initLoad()},buttonPassClick:function(){this.selectSound.play(),this.targetScoreInt+=5,this.initLoad(),this.initScene(),this.generateBlock();var t=cc.moveTo(0,this.blockPane.x,this.blockPane.y+80);this.blockPane.runAction(t)},updateTime:function(){this.time.string="时间："+this.remainTime},updateScore:function(){this.score.string="分数："+this.curScore},updateTargetScore:function(){this.targetScore.string="目标分数："+this.targetScoreInt},update:function(t){this.timeCount+=t,this.bOver||1!=Math.floor(this.timeCount)||(this.remainTime-=1,this.timeCount=0,this.updateTime(),0==this.remainTime&&this.gameOver1())}}),cc._RF.pop()},{}]},{},["Block","Game"]);